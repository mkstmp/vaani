<!DOCTYPE html>
<html>
<head>
  <title>Vaani Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    [x-cloak] { display: none !important; }
  </style>
</head>

<body class="bg-gradient-to-br from-indigo-50 to-blue-100 min-h-screen font-sans relative">

  <div x-data="{ tab: 'record' }"
       class="flex flex-col min-h-screen max-w-md mx-auto bg-white shadow-lg rounded-t-3xl overflow-hidden relative">

    <!-- Main Content -->
    <div class="flex-1 overflow-y-auto p-4">
<template x-if="tab === 'record'">
  <div x-transition>
    {% include 'components/record_tab.html' %}
  </div>
</template>


      <template x-if="tab === 'search'">
        <div x-transition>
          {% include 'components/search_tab.html' %}
        </div>
      </template>

      <template x-if="tab === 'progress'">
        <div x-transition>
          {% include 'components/progress_tab.html' %}
        </div>
      </template>

      {% if user.email == ADMIN_EMAIL %}
      <template x-if="tab === 'admin'">
        <div x-transition>
          {% include 'components/admin_tab.html' %}
        </div>
      </template>
      {% endif %}
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white border-t border-gray-200 flex justify-around items-center h-16 shadow-lg">
      
      <!-- Record Tab -->
      <button @click="tab='record'"
              :class="tab==='record' ? 'text-indigo-700 font-semibold border-t-4 border-indigo-700 pt-1' : 'text-gray-500'"
              class="flex flex-col items-center transition-all duration-200">
        🎤
        <span class="text-xs">Record</span>
      </button>

      <!-- Search Tab -->
      <button @click="tab='search'"
              :class="tab==='search' ? 'text-indigo-700 font-semibold border-t-4 border-indigo-700 pt-1' : 'text-gray-500'"
              class="flex flex-col items-center transition-all duration-200">
        🔍
        <span class="text-xs">Search</span>
      </button>

      <!-- Progress Tab -->
      <button @click="tab='progress'"
              :class="tab==='progress' ? 'text-indigo-700 font-semibold border-t-4 border-indigo-700 pt-1' : 'text-gray-500'"
              class="flex flex-col items-center transition-all duration-200">
        📊
        <span class="text-xs">Progress</span>
      </button>

      <!-- Admin Tab -->
      {% if user.email == ADMIN_EMAIL %}
      <button @click="tab='admin'"
              :class="tab==='admin' ? 'text-indigo-700 font-semibold border-t-4 border-indigo-700 pt-1' : 'text-gray-500'"
              class="flex flex-col items-center transition-all duration-200">
        ⚙️
        <span class="text-xs">Admin</span>
      </button>
      {% endif %}

      <!-- Logout -->
      <button @click="window.location='/logout'"
              class="flex flex-col items-center text-gray-500 hover:text-indigo-600 transition-all duration-200">
        🚪
        <span class="text-xs">Logout</span>
      </button>
    </nav>

  </div>

</body>
</html>
